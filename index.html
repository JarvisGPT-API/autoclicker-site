<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Iron Evolution Clicker</title>

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg, #0b1220, #020617);
      color: white;
      text-align: center;
    }

    header {
      padding: 14px 18px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: rgba(2,6,23,0.6);
      position: sticky;
      top: 0;
    }

    button {
      background: linear-gradient(135deg, #2563eb, #3b82f6);
      border: none;
      border-radius: 14px;
      padding: 12px 20px;
      color: white;
      font-size: 15px;
      cursor: pointer;
    }

    .hero {
      width: 220px;
      height: 220px;
      margin: 30px auto;
      border-radius: 50%;
      background: radial-gradient(circle, #fde68a, #92400e);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 64px;
      user-select: none;
    }

    .iron {
      background: radial-gradient(circle, #facc15, #b91c1c 60%, #7f1d1d);
    }

    .stats {
      font-size: 26px;
      font-weight: bold;
    }

    .income {
      font-size: 14px;
      opacity: 0.7;
    }

    .panel {
      max-width: 360px;
      margin: 10px auto;
      display: grid;
      gap: 10px;
    }

    .shop {
      background: rgba(255,255,255,0.05);
      border-radius: 16px;
      padding: 14px;
      margin-top: 20px;
    }
  </style>
</head>

<body>

<header>
  <div>Iron Evolution</div>
  <button id="langBtn">RU / EN</button>
</header>

<div class="stats" id="scoreText"></div>
<div class="income" id="incomeText"></div>

<div class="hero" id="hero">üôÇ</div>

<div class="panel">
  <button id="upgradeClickBtn"></button>
  <button id="upgradeIncomeBtn"></button>
</div>

<div class="shop">
  <h3 id="shopTitle">–ú–∞–≥–∞–∑–∏–Ω –∫–æ—Å—Ç—é–º–∞</h3>
  <div class="panel">
    <button id="helmetBtn"></button>
    <button id="reactorBtn"></button>
    <button id="bootsBtn"></button>
  </div>
</div>

<audio id="clickSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>

<script>
  let score = +localStorage.getItem('score') || 0;
  let perClick = +localStorage.getItem('perClick') || 1;
  let income = +localStorage.getItem('income') || 0;
  let parts = JSON.parse(localStorage.getItem('parts') || '{}');
  let lang = localStorage.getItem('lang') || 'ru';

  const hero = document.getElementById('hero');
  const scoreText = document.getElementById('scoreText');
  const incomeText = document.getElementById('incomeText');
  const clickSound = document.getElementById('clickSound');

  const shopItems = {
    helmet: { cost: 50, income: 1, ru: '–®–ª–µ–º', en: 'Helmet' },
    reactor: { cost: 150, income: 3, ru: '–†–µ–∞–∫—Ç–æ—Ä', en: 'Reactor' },
    boots: { cost: 300, income: 5, ru: '–ë–æ—Ç–∏–Ω–∫–∏', en: 'Boots' }
  };

  function save() {
    localStorage.setItem('score', score);
    localStorage.setItem('perClick', perClick);
    localStorage.setItem('income', income);
    localStorage.setItem('parts', JSON.stringify(parts));
    localStorage.setItem('lang', lang);
  }

  function updateUI() {
    scoreText.textContent = lang === 'ru' ? `–≠–Ω–µ—Ä–≥–∏—è: ${score}` : `Energy: ${score}`;
    incomeText.textContent = lang === 'ru' ? `–î–æ—Ö–æ–¥: ${income}/—Å–µ–∫` : `Income: ${income}/sec`;

    upgradeClickBtn.textContent =
      lang === 'ru'
        ? `–£—Å–∏–ª–∏—Ç—å —Ç–∞–ø (+1) ‚Äî ${perClick * 10}`
        : `Upgrade tap (+1) ‚Äî ${perClick * 10}`;

    upgradeIncomeBtn.textContent =
      lang === 'ru'
        ? `–ë–∞–∑–æ–≤—ã–π –¥–æ—Ö–æ–¥ +1 ‚Äî ${income * 15 + 20}`
        : `Base income +1 ‚Äî ${income * 15 + 20}`;

    for (const id in shopItems) {
      const btn = document.getElementById(id + 'Btn');
      const item = shopItems[id];
      btn.textContent = parts[id]
        ? (lang === 'ru' ? '–ö—É–ø–ª–µ–Ω–æ' : 'Bought')
        : `${lang === 'ru' ? item.ru : item.en} +${item.income} ‚Äî ${item.cost}`;
      btn.disabled = !!parts[id];
    }
  }

  hero.onclick = () => {
    score += perClick;
    clickSound.currentTime = 0;
    clickSound.play();
    save();
    updateUI();
  };

  upgradeClickBtn.onclick = () => {
    const cost = perClick * 10;
    if (score >= cost) {
      score -= cost;
      perClick++;
      save();
      updateUI();
    }
  };

  upgradeIncomeBtn.onclick = () => {
    const cost = income * 15 + 20;
    if (score >= cost) {
      score -= cost;
      income++;
      save();
      updateUI();
    }
  };

  for (const id in shopItems) {
    document.getElementById(id + 'Btn').onclick = () => {
      const item = shopItems[id];
      if (!parts[id] && score >= item.cost) {
        score -= item.cost;
        income += item.income;
        parts[id] = true;
        hero.classList.add('iron');
        save();
        updateUI();
      }
    };
  }

  langBtn.onclick = () => {
    lang = lang === 'ru' ? 'en' : 'ru';
    save();
    updateUI();
  };

  setInterval(() => {
    score += income;
    save();
    updateUI();
  }, 1000);

  updateUI();
</script>

</body>
</html>
