<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WOW</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: radial-gradient(circle at top, #0b1a2a, #020617);
  color: white;
  text-align: center;
  touch-action: none;
}

#top {
  display: flex;
  justify-content: space-between;
  padding: 10px 20px;
}

#circle {
  position: relative;
  width: 260px;
  height: 260px;
  margin: 20px auto;
  border-radius: 50%;
}

svg {
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.letter {
  position: absolute;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background: #2563eb;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  font-weight: bold;
}

.neon .letter {
  background: #a855f7;
  box-shadow: 0 0 15px #a855f7;
}

.letter.active {
  background: #22c55e;
  transform: scale(1.15);
}

#current { font-size: 28px; min-height: 40px; }

#words {
  display: grid;
  gap: 10px;
  justify-content: center;
}

.word { display: flex; gap: 6px; }

.cell {
  width: 34px;
  height: 40px;
  border: 2px solid rgba(255,255,255,0.4);
  border-radius: 6px;
  font-size: 22px;
  display: flex;
  align-items: center;
  justify-content: center;
}

button {
  margin: 6px;
  padding: 10px 16px;
  border-radius: 10px;
  border: none;
  background: #22c55e;
  color: white;
  font-size: 15px;
}

#shop {
  display: none;
  background: rgba(0,0,0,0.8);
  position: fixed;
  inset: 0;
  padding-top: 100px;
}
</style>
</head>

<body>

<div id="top">
  <div>üí∞ <span id="coins">0</span></div>
  <div>–£—Ä. <span id="level">1</span></div>
</div>

<div id="current"></div>

<div id="circle">
  <svg id="lines"></svg>
</div>

<button onclick="hint()">üí° –ü–æ–¥—Å–∫–∞–∑–∫–∞ (5üí∞)</button>
<button onclick="openShop()">üõí –ú–∞–≥–∞–∑–∏–Ω</button>

<div id="words"></div>

<div id="shop">
  <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
  <button onclick="setSkin('default')">üîµ –°—Ç–∞–Ω–¥–∞—Ä—Ç</button><br>
  <button onclick="buyNeon()">üü£ –ù–µ–æ–Ω (20üí∞)</button><br><br>
  <button onclick="closeShop()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<script>
// üîπ –ë–ê–ó–û–í–´–ï –£–†–û–í–ù–ò (20)
const baseLevels = [
  { letters:["–ö","–û","–¢"], words:["–ö–û–¢","–¢–û–ö"] },
  { letters:["–î","–û","–ú"], words:["–î–û–ú","–ú–û–î"] },
  { letters:["–°","–û","–ö"], words:["–°–û–ö","–ö–û–°"] },
  { letters:["–õ","–ï","–°"], words:["–õ–ï–°","–°–ï–õ"] },
  { letters:["–ú","–ò","–†"], words:["–ú–ò–†","–†–ò–ú"] },

  { letters:["–†","–£","–ö","–ê"], words:["–†–£–ö–ê","–ö–ê–†","–ê–†–ö"] },
  { letters:["–°","–¢","–û","–õ"], words:["–°–¢–û–õ","–¢–û–õ","–õ–û–¢"] },
  { letters:["–ì","–û","–†","–ê"], words:["–ì–û–†–ê","–†–û–ì","–ê–†–û"] },
  { letters:["–ù","–û","–ì","–ê"], words:["–ù–û–ì–ê","–ì–û–ù","–ê–ù–û"] },
  { letters:["–¢","–ï","–õ","–û"], words:["–¢–ï–õ–û","–õ–ï–¢","–û–õ–ï"] },

  { letters:["–ú","–ê","–®","–ò","–ù","–ê"], words:["–ú–ê–®–ò–ù–ê","–ú–ò–ù–ê","–®–ê–ú"] },
  { letters:["–ö","–ê","–ú","–ï","–ù","–¨"], words:["–ö–ê–ú–ï–ù–¨","–ú–ï–ù–ê"] },
  { letters:["–°","–û","–õ","–ù","–¶","–ï"], words:["–°–û–õ–ù–¶–ï","–°–û–ù","–õ–ï–¶"] },
  { letters:["–ó","–í","–ï","–ó","–î","–ê"], words:["–ó–í–ï–ó–î–ê","–í–ï–ó","–î–ê–ó"] },
  { letters:["–ü","–õ","–ê","–ù","–ï","–¢","–ê"], words:["–ü–õ–ê–ù–ï–¢–ê","–õ–ï–ù","–¢–ê–ü"] },

  { letters:["–†","–ê","–ö","–ï","–¢","–ê"], words:["–†–ê–ö–ï–¢–ê","–ö–ê–†–ï–¢"] },
  { letters:["–¢","–ï","–õ","–ï","–§","–û","–ù"], words:["–¢–ï–õ–ï–§–û–ù","–§–û–ù"] },
  { letters:["–≠","–ù","–ï","–†","–ì","–ò","–Ø"], words:["–≠–ù–ï–†–ì–ò–Ø","–ì–ï–ù"] },
  { letters:["–ö","–û","–ú","–ü","–¨","–Æ","–¢","–ï","–†"], words:["–ö–û–ú–ü–¨–Æ–¢–ï–†","–ö–û–ú–ï–¢"] },
  { letters:["–°","–¢","–ê","–ù","–¶","–ò","–Ø"], words:["–°–¢–ê–ù–¶–ò–Ø","–¶–ï–ù–ê"] }
];

// üîÅ –î–ï–õ–ê–ï–ú 50 –£–†–û–í–ù–ï–ô
const levels = [];
while (levels.length < 50) {
  baseLevels.forEach(l => {
    if (levels.length < 50)
      levels.push(JSON.parse(JSON.stringify(l)));
  });
}

let level = +localStorage.level || 0;
let coins = +localStorage.coins || 0;
let skin = localStorage.skin || "default";

let current="", found=[], used=[], points=[], dragging=false;

const circle = document.getElementById("circle");
const svg = document.getElementById("lines");
const wordsDiv = document.getElementById("words");

document.getElementById("coins").textContent = coins;
document.body.className = skin === "neon" ? "neon" : "";

function save() {
  localStorage.level = level;
  localStorage.coins = coins;
  localStorage.skin = skin;
}

function loadLevel() {
  if (level >= levels.length) return;
  circle.querySelectorAll(".letter").forEach(e=>e.remove());
  wordsDiv.innerHTML="";
  svg.innerHTML="";
  current=""; found=[]; used=[]; points=[];
  document.getElementById("level").textContent = level+1;

  const L = levels[level].letters;
  const r = 100;

  L.forEach((l,i)=>{
    const a = 2*Math.PI/L.length*i;
    const x = 130+r*Math.cos(a)-28;
    const y = 130+r*Math.sin(a)-28;
    const d = document.createElement("div");
    d.className="letter";
    d.textContent=l;
    d.style.left=x+"px";
    d.style.top=y+"px";
    circle.appendChild(d);
  });

  levels[level].words.forEach(w=>{
    const row=document.createElement("div");
    row.className="word";
    row.dataset.word=w;
    for(let i=0;i<w.length;i++) row.appendChild(document.createElement("div")).className="cell";
    wordsDiv.appendChild(row);
  });
}

circle.onpointerdown=e=>{dragging=true;check(e);}
circle.onpointermove=e=>dragging&&check(e);
document.onpointerup=()=>{dragging=false;checkWord();reset();}

function check(e){
  document.querySelectorAll(".letter").forEach(el=>{
    if(used.includes(el))return;
    const r=el.getBoundingClientRect();
    if(Math.hypot(e.clientX-(r.left+r.width/2), e.clientY-(r.top+r.height/2))<30){
      used.push(el);
      el.classList.add("active");
      current+=el.textContent;
      points.push({x:r.left+r.width/2,y:r.top+r.height/2});
      draw();
      document.getElementById("current").textContent=current;
    }
  });
}

function draw(){
  svg.innerHTML="";
  for(let i=1;i<points.length;i++){
    svg.innerHTML+=`<line x1="${points[i-1].x-circle.offsetLeft}"
    y1="${points[i-1].y-circle.offsetTop}"
    x2="${points[i].x-circle.offsetLeft}"
    y2="${points[i].y-circle.offsetTop}"
    stroke="#22c55e" stroke-width="6" stroke-linecap="round"/>`;
  }
}

function reset(){
  document.querySelectorAll(".letter").forEach(l=>l.classList.remove("active"));
  svg.innerHTML=""; used=[]; points=[]; current="";
  document.getElementById("current").textContent="";
}

function checkWord(){
  const words=levels[level].words;
  if(words.includes(current)&&!found.includes(current)){
    found.push(current);
    coins+=current.length;
    document.getElementById("coins").textContent=coins;
    save();
    document.querySelectorAll(".word").forEach(r=>{
      if(r.dataset.word===current)
        [...r.children].forEach((c,i)=>c.textContent=current[i]);
    });
    if(found.length === words.length){
      level++;
      save();
      setTimeout(loadLevel,600);
    }
  }
}

function hint(){
  if(coins<5)return;
  coins-=5;
  document.getElementById("coins").textContent=coins;
  save();
  const row=[...document.querySelectorAll(".word")].find(r=>![...r.children].every(c=>c.textContent));
  if(!row)return;
  const i=[...row.children].findIndex(c=>!c.textContent);
  row.children[i].textContent=row.dataset.word[i];
}

function openShop(){document.getElementById("shop").style.display="block";}
function closeShop(){document.getElementById("shop").style.display="none";}
function buyNeon(){if(coins>=20){coins-=20;skin="neon";save();location.reload();}}
function setSkin(s){skin=s;save();location.reload();}

loadLevel();
</script>

</body>
</html>
