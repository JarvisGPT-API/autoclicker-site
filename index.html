<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WOW â€” Ð¡Ð»Ð¾Ð²Ð°</title>

<style>
body {
  margin: 0;
  font-family: system-ui, sans-serif;
  background: radial-gradient(circle at top, #0b1a2a, #020617);
  color: white;
  text-align: center;
  touch-action: none;
}

h1 { margin: 10px; }
#top {
  display: flex;
  justify-content: space-between;
  padding: 10px 20px;
  opacity: 0.9;
}

#current {
  font-size: 30px;
  min-height: 40px;
  margin: 10px;
}

#circle {
  position: relative;
  width: 260px;
  height: 260px;
  margin: 20px auto;
  border-radius: 50%;
  background: rgba(255,255,255,0.05);
}

.letter {
  position: absolute;
  width: 55px;
  height: 55px;
  background: #2563eb;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 26px;
  font-weight: bold;
  user-select: none;
}

.letter.active {
  background: #22c55e;
  transform: scale(1.1);
}

#words {
  margin-top: 20px;
  display: grid;
  gap: 12px;
  justify-content: center;
}

.word {
  display: flex;
  gap: 8px;
  justify-content: center;
}

.cell {
  width: 34px;
  height: 40px;
  border-radius: 6px;
  border: 2px solid rgba(255,255,255,0.4);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 22px;
}
</style>
</head>

<body>

<div id="top">
  <div>ðŸ’° <span id="coins">0</span></div>
  <div>Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ <span id="level">1</span></div>
</div>

<h1>WOW</h1>

<div id="current"></div>
<div id="circle"></div>
<div id="words"></div>

<audio id="tapSound" src="https://actions.google.com/sounds/v1/cartoon/pop.ogg"></audio>
<audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<script>
const levels = [
  { letters:["Ðš","Ðž","Ð¢"], words:["ÐšÐžÐ¢","Ð¢ÐžÐš"] },
  { letters:["Ð”","Ðž","Ðœ"], words:["Ð”ÐžÐœ","ÐœÐžÐ”"] },
  { letters:["Ð›","Ð•","Ð¡","Ð"], words:["Ð›Ð•Ð¡","Ð›Ð•Ð¡Ð","Ð¡Ð•Ð›"] }
];

let level = 0;
let current = "";
let found = [];
let coins = 0;
let activeLetters = [];
let dragging = false;

const circle = document.getElementById("circle");
const wordsDiv = document.getElementById("words");
const currentDiv = document.getElementById("current");
const coinsDiv = document.getElementById("coins");
const levelDiv = document.getElementById("level");
const tapSound = document.getElementById("tapSound");
const winSound = document.getElementById("winSound");

function loadLevel() {
  current = "";
  found = [];
  activeLetters = [];
  circle.innerHTML = "";
  wordsDiv.innerHTML = "";
  levelDiv.textContent = level + 1;
  updateCurrent();

  const letters = levels[level].letters;
  const radius = 100;

  letters.forEach((l, i) => {
    const angle = (2 * Math.PI / letters.length) * i;
    const x = 130 + radius * Math.cos(angle) - 27;
    const y = 130 + radius * Math.sin(angle) - 27;

    const el = document.createElement("div");
    el.className = "letter";
    el.textContent = l;
    el.style.left = x + "px";
    el.style.top = y + "px";

    el.addEventListener("pointerdown", () => {
      dragging = true;
      selectLetter(el);
    });

    el.addEventListener("pointerenter", () => {
      if (dragging) selectLetter(el);
    });

    circle.appendChild(el);
  });

  levels[level].words.forEach(word => {
    const row = document.createElement("div");
    row.className = "word";
    row.dataset.word = word;

    for (let i = 0; i < word.length; i++) {
      const cell = document.createElement("div");
      cell.className = "cell";
      row.appendChild(cell);
    }
    wordsDiv.appendChild(row);
  });
}

document.addEventListener("pointerup", () => {
  dragging = false;
  checkWord();
  resetLetters();
});

function selectLetter(el) {
  if (activeLetters.includes(el)) return;
  activeLetters.push(el);
  el.classList.add("active");
  current += el.textContent;
  tapSound.currentTime = 0;
  tapSound.play();
  updateCurrent();
}

function resetLetters() {
  activeLetters.forEach(l => l.classList.remove("active"));
  activeLetters = [];
  current = "";
  updateCurrent();
}

function updateCurrent() {
  currentDiv.textContent = current;
}

function checkWord() {
  const words = levels[level].words;

  if (words.includes(current) && !found.includes(current)) {
    found.push(current);
    coins += current.length;
    coinsDiv.textContent = coins;
    winSound.play();

    document.querySelectorAll(".word").forEach(row => {
      if (row.dataset.word === current) {
        [...row.children].forEach((cell, i) => {
          cell.textContent = current[i];
        });
      }
    });
  }

  if (found.length === words.length) {
    setTimeout(() => {
      level++;
      if (level < levels.length) loadLevel();
      else alert("ðŸŽ‰ Ð’ÑÐµ ÑƒÑ€Ð¾Ð²Ð½Ð¸ Ð¿Ñ€Ð¾Ð¹Ð´ÐµÐ½Ñ‹!");
    }, 800);
  }
}

loadLevel();
</script>

</body>
</html>
